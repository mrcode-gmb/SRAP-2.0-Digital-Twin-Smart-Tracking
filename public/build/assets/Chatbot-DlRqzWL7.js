import{j as e}from"./ui--EPVQjIL.js";import{r as s,H as a,L as t,d as r}from"./inertia-Cj_WjKpf.js";import{z as i,F as l}from"./index-Cr_A2xMV.js";import{M as n}from"./Modal-uBvB864m.js";import{A as c,c as d,B as o,M as m,C as x,b as h,a as j}from"./AuthenticatedLayout-9_QGYa_w.js";import{C as u,a as g}from"./Card-BDwu8o3f.js";import{B as p}from"./Button-DAnlAX8y.js";import{m as y}from"./motion-CwjCYErC.js";import{P as f}from"./plus-C451Pb2i.js";import{F as v}from"./funnel-H8XVsEAS.js";import{U as N}from"./users-DGojlet8.js";import{E as b}from"./eye-DfUIjx7h.js";import{T as w}from"./trash-2-PgX3iJZe.js";import{c as k}from"./app-BNVVFcTX.js";import"./vendor-vi784Xxu.js";import"./transition-BMZY_FM7.js";import"./utils-54zDqgmH.js";import"./house-DyNubFCu.js";import"./shield-BHovswbK.js";
/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=k("thumbs-down",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),S=k("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);function A({conversations:k,filters:A,flash:M}){const[_,L]=s.useState(A?.search||""),[F,H]=s.useState(A?.status||""),[z,B]=s.useState(!1),[D,U]=s.useState(null);s.useEffect(()=>{M?.success&&i.success(M.success),M?.error&&i.error(M.error)},[M]);const E=()=>{B(!1),U(null)},T=s=>{if(!s)return e.jsx(j,{className:"bg-gray-100 text-gray-800",children:"Unknown"});return e.jsx(j,{className:{active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",archived:"bg-gray-100 text-gray-800"}[s]||"bg-gray-100 text-gray-800",children:s.charAt(0).toUpperCase()+s.slice(1)})};return e.jsxs(c,{children:[e.jsx(a,{title:"Chatbot Management"}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Chatbot Management"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Monitor and manage AI chatbot conversations and feedback"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(t,{href:"/admin/chatbot/create",children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"New Conversation"]})})})]})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-6",children:e.jsx(u,{children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Conversations"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search conversations...",value:_,onChange:e=>L(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:F,onChange:e=>H(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(p,{onClick:()=>{r.get("/admin/chatbot",{search:_,status:F},{preserveState:!0,preserveScroll:!0})},className:"w-full",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})})]})})})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"space-y-4",children:k?.data?.map((s,a)=>{return e.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2+.1*a},children:e.jsx(u,{className:"hover:shadow-lg transition-all duration-300",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(o,{className:"w-5 h-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Conversation #",s.id]}),T(s.status),s.feedback&&(r=s.feedback,"positive"===r?e.jsx(S,{className:"w-4 h-4 text-green-500"}):"negative"===r?e.jsx(C,{className:"w-4 h-4 text-red-500"}):null)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["User: ",s.user?.name||"Anonymous"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.messages_count," messages"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Started: ",new Date(s.created_at).toLocaleDateString()]})]})]}),s.last_message&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:["Last message: ",s.last_message]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{href:`/admin/chatbot/${s.id}`,children:e.jsxs(p,{variant:"outline",size:"sm",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"View"]})}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>(e=>{U(e),B(!0)})(s),className:"text-red-600 hover:text-red-700",children:e.jsx(w,{className:"w-4 h-4"})})]})]})})})},s.id);var r})}),(!k?.data||0===k.data.length)&&e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center py-12",children:[e.jsx(o,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Conversations Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"No chatbot conversations match your current filters."}),e.jsx(t,{href:"/admin/chatbot/create",children:e.jsxs(p,{children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Start Conversation"]})})]}),k?.links&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mt-8 flex justify-center",children:e.jsx("div",{className:"flex space-x-2",children:k.links.map((s,a)=>e.jsx(t,{href:s.url??"#",className:"px-3 py-2 text-sm rounded-lg "+(s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border"),dangerouslySetInnerHTML:{__html:s.label}},a))})})]}),e.jsx(n,{show:z,onClose:E,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(h,{className:"w-6 h-6 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Conversation"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),D&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Session: ",D.session_id]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[D.user_message?.substring(0,100),D.user_message?.length>100?"...":""]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(p,{variant:"outline",onClick:E,children:"Cancel"}),e.jsxs(p,{variant:"destructive",onClick:()=>{D&&r.delete(`/admin/chatbot/${D.id}`,{onSuccess:()=>{i.success("Conversation deleted successfully!"),B(!1),U(null)},onError:()=>{i.error("Failed to delete conversation. Please try again."),B(!1),U(null)}})},className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Delete Conversation"]})]})]})}),e.jsx(l,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,style:{background:"#10b981",color:"#fff"}},error:{duration:5e3,style:{background:"#ef4444",color:"#fff"}}}})]})}export{A as default};
