import{j as e}from"./ui--EPVQjIL.js";import{r as t,b as a,H as s}from"./inertia-Cj_WjKpf.js";import{A as r,C as l}from"./AuthenticatedLayout-9_QGYa_w.js";import{B as i}from"./Button-DAnlAX8y.js";import{C as n,b as o,c as d,d as c,a as m}from"./Card-BDwu8o3f.js";import{A as x}from"./arrow-left-BeGU5ljd.js";import{T as p}from"./users-DGojlet8.js";import{I as u}from"./info-2DV0Gtkt.js";import{M as b}from"./mail-uBnba4y0.js";import{S as h}from"./save-CJJ-YSXR.js";import"./vendor-vi784Xxu.js";import"./utils-54zDqgmH.js";import"./house-DyNubFCu.js";import"./app-BNVVFcTX.js";import"./motion-CwjCYErC.js";import"./shield-BHovswbK.js";function g({kpis:g=[],milestones:y=[]}){const[j,f]=t.useState("system"),{data:v,setData:k,post:N,processing:w,errors:C}=a({title:"",message:"",type:"system",priority:3,alertable_type:"",alertable_id:"",recipients:[],send_email:!1,metadata:{}}),_=[{value:"deadline",label:"Deadline Alert",icon:l,color:"orange"},{value:"performance",label:"Performance Alert",icon:p,color:"red"},{value:"system",label:"System Alert",icon:u,color:"blue"},{value:"milestone",label:"Milestone Alert",icon:l,color:"green"},{value:"kpi_update",label:"KPI Update",icon:p,color:"purple"}];return e.jsxs(r,{children:[e.jsx(s,{title:"Create Alert"}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Create Alert"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Create a new system alert or notification"})]})]})})}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),N(route("admin.alerts.store"))},className:"space-y-6",children:[e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(d,{children:"Alert Details"}),e.jsx(c,{children:"Provide the basic information for the alert"})]}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Alert Title *"}),e.jsx("input",{type:"text",value:v.title,onChange:e=>k("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter alert title..."}),C.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Alert Message *"}),e.jsx("textarea",{value:v.message,onChange:e=>k("message",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter detailed alert message..."}),C.message&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Alert Type *"}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:_.map(t=>e.jsx("button",{type:"button",onClick:()=>{k("type",t.value),f(t.value)},className:"p-3 border-2 rounded-lg text-left transition-colors "+(v.type===t.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t.icon,{className:`h-4 w-4 text-${t.color}-600`}),e.jsx("span",{className:"text-sm font-medium",children:t.label})]})},t.value))}),C.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Priority Level *"}),e.jsx("div",{className:"flex space-x-3",children:[{value:1,label:"Critical",color:"red"},{value:2,label:"High",color:"orange"},{value:3,label:"Medium",color:"yellow"},{value:4,label:"Low",color:"green"},{value:5,label:"Info",color:"blue"}].map(t=>e.jsx("button",{type:"button",onClick:()=>k("priority",t.value),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+(v.priority===t.value?`bg-${t.color}-100 text-${t.color}-800 border-2 border-${t.color}-500`:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-transparent hover:border-gray-300"),children:t.label},t.value))}),C.priority&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.priority})]})]})]}),e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(d,{children:"Related Entity (Optional)"}),e.jsx(c,{children:"Link this alert to a specific KPI or Milestone"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Entity Type"}),e.jsxs("select",{value:v.alertable_type,onChange:e=>{k("alertable_type",e.target.value),k("alertable_id","")},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select entity type..."}),e.jsx("option",{value:"App\\Models\\Kpis",children:"KPI"}),e.jsx("option",{value:"App\\Models\\Milestone",children:"Milestone"})]})]}),v.alertable_type&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v.alertable_type.includes("Kpi")?"Select KPI":"Select Milestone"}),e.jsxs("select",{value:v.alertable_id,onChange:e=>k("alertable_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxs("option",{value:"",children:["Select ",v.alertable_type.includes("Kpi")?"KPI":"Milestone","..."]}),v.alertable_type.includes("Kpi")?g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id)):y.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]})]}),e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("span",{children:"Email Notifications"})]}),e.jsx(c,{children:"Configure email notifications for this alert"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"send_email",checked:v.send_email,onChange:e=>k("send_email",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"send_email",className:"text-sm text-gray-700 dark:text-gray-300",children:"Send email notifications"})]}),v.send_email&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Recipients"}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>{k("recipients",[...v.recipients,""])},children:"Add Email"})]}),e.jsx("div",{className:"space-y-2",children:v.recipients.map((t,a)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"email",value:t,onChange:e=>((e,t)=>{const a=[...v.recipients];a[e]=t,k("recipients",a)})(a,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address..."}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>(e=>{const t=v.recipients.filter((t,a)=>a!==e);k("recipients",t)})(a),children:"Remove"})]},a))})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsxs(i,{type:"submit",disabled:w,className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:w?"Creating...":"Create Alert"})]})]})]})]})]})}export{g as default};
