import{j as e}from"./ui--EPVQjIL.js";import{r as s,b as r,H as t,d as a}from"./inertia-Cj_WjKpf.js";import{F as i,z as l}from"./index-Cr_A2xMV.js";import{A as d,S as n,U as c,T as o,a as x}from"./AuthenticatedLayout-BYa0DHjr.js";import{C as m,b as u,c as p,d as h,a as g}from"./Card-BDwu8o3f.js";import{B as y}from"./Button-DAnlAX8y.js";import{m as b}from"./motion-CwjCYErC.js";import{B as j}from"./users-Bfxi8K-c.js";import{D as f}from"./download-CAfWJy6P.js";import{P as N}from"./play-BkcwVg9i.js";import{c as k,C as v}from"./app-DVdO48kI.js";import{Z as w}from"./zap-_fnpzzFy.js";import"./vendor-vi784Xxu.js";import"./utils-54zDqgmH.js";import"./house-gbNKmPpv.js";import"./shield-BjG87K2N.js";
/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=k("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function C({predictions:k={data:[]},stats:C={},apiConfig:S={}}){const[_,I]=s.useState("manual"),[A,F]=s.useState(null),[D,E]=s.useState(!1),[R,B]=s.useState(null),M=s.useRef(null),{data:z,setData:U,post:L,processing:q,errors:T}=r({progress:"",budget_utilization:"",delay_days:"",engagement_score:""}),{data:H,setData:K,post:V,processing:O}=r({file:null}),$=s=>e.jsx(x,{className:{Low:"bg-green-100 text-green-800",Medium:"bg-yellow-100 text-yellow-800",High:"bg-red-100 text-red-800"}[s]||"bg-gray-100 text-gray-800",children:s});return e.jsxs(d,{children:[e.jsx(t,{title:"AI Risk Prediction"}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(j,{className:"w-8 h-8 text-blue-600"}),"SRAP Smart Tracking - Risk Prediction"]}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"AI-powered risk prediction for NITDA SRAP 2.0 KPIs and milestones"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-2",children:[e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"API Config"]}),e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Export Results"]})]})]})}),e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>I("manual"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("manual"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(N,{className:"w-4 h-4 inline mr-2"}),"Manual Input Prediction"]}),e.jsxs("button",{onClick:()=>I("bulk"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("bulk"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(c,{className:"w-4 h-4 inline mr-2"}),"Upload Excel/CSV for Bulk Prediction"]}),e.jsxs("button",{onClick:()=>I("history"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("history"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(P,{className:"w-4 h-4 inline mr-2"}),"Prediction History"]}),e.jsxs("button",{onClick:()=>I("api"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("api"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(w,{className:"w-4 h-4 inline mr-2"}),"API Configuration"]})]})})}),"manual"===_&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"Manual Input Prediction"}),e.jsx(h,{children:"Enter KPI metrics to predict risk and success probability"})]}),e.jsx(g,{children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),E(!0),L(route("ai-predictions.manual-predict"),{onSuccess:e=>{F(e.props.results||e.results),E(!1),l.success("Prediction completed successfully!")},onError:e=>{E(!1),l.error("Prediction failed. Please check your inputs.")}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Progress (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:z.progress,onChange:e=>U("progress",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"65",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Budget Utilization (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:z.budget_utilization,onChange:e=>U("budget_utilization",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"70",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Delay (Days)"}),e.jsx("input",{type:"number",min:"0",value:z.delay_days,onChange:e=>U("delay_days",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Engagement Score"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:z.engagement_score,onChange:e=>U("engagement_score",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"55.2",required:!0})]})]}),e.jsx(y,{type:"submit",className:"w-full",disabled:D,children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Predicting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Predict"]})})]})})]})}),e.jsx(b.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(p,{children:"Prediction Result"})}),e.jsx(g,{children:A?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(o,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[A.predicted_success.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Predicted Success Rate"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"mb-2",children:$(A.predicted_risk)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Risk Level"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:[A.confidence.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confidence"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Prediction Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'Enter values and click "Predict" to see AI analysis'})]})})]})})]}),"bulk"===_&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"Upload Excel/CSV for Bulk Prediction"}),e.jsx(h,{children:"Upload a file with multiple records for batch prediction processing"})]}),e.jsx(g,{children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),R?(K("file",R),V(route("ai-predictions.bulk-predict"),{onSuccess:e=>{l.success(`Bulk prediction completed! ${e.props.results?.length||0} records processed.`),B(null),M.current&&(M.current.value=""),a.reload({only:["predictions"]})},onError:e=>{l.error("Bulk upload failed. Please check your file format.")}})):l.error("Please select a file to upload")},className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(c,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:R?R.name:"Choose File"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Select Excel (.xlsx) or CSV file for bulk prediction"}),e.jsx("input",{ref:M,type:"file",accept:".xlsx,.xls,.csv",onChange:e=>{const s=e.target.files[0];s&&(B(s),l.success(`File selected: ${s.name}`))},className:"hidden",id:"bulk-upload"}),e.jsx(y,{type:"button",variant:"outline",className:"cursor-pointer",children:e.jsx("label",{htmlFor:"bulk-upload",children:R?"Change File":"Select File"})})]}),e.jsx(y,{type:"submit",className:"w-full",disabled:!R||O,children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Upload & Predict"]})}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"File Format:"})," Include columns: Progress, Budget_Utilization, Delay_Days, Engagement_Score"]})})]})})]})}),"history"===_&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"Prediction History"}),e.jsx(h,{children:"Recent AI predictions and their results"})]}),e.jsx(g,{children:k.data&&k.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Model"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Confidence"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Predicted_Risk"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:k.data.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:s.prediction_type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:s.model_name}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[s.confidence_score,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(x,{className:"completed"===s.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(s.prediction_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.prediction_result?.risk_level&&$(s.prediction_result.risk_level)})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(P,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No prediction history available. Make some predictions to see results here."})]})})]})}),"api"===_&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"Flask Model API Configuration"}),e.jsx(h,{children:"Configure the connection to your Flask ML model API"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Base URL"}),e.jsx("input",{type:"url",placeholder:"http://localhost:5000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prediction Endpoint"}),e.jsx("input",{type:"text",placeholder:"/api/predict",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bulk Prediction Endpoint"}),e.jsx("input",{type:"text",placeholder:"/api/predict/bulk",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key (Optional)"}),e.jsx("input",{type:"password",placeholder:"Enter API key if required",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(y,{children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Save Configuration"]}),e.jsxs(y,{variant:"outline",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Test Connection"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsx(v,{className:"w-5 h-5 text-green-600 inline mr-2"}),e.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:"API connection successful! Model ready for predictions."})]})]})})]})})]}),e.jsx(i,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})]})}export{C as default};
