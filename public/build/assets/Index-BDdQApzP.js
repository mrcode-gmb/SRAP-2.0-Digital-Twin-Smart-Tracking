import{j as e}from"./ui--EPVQjIL.js";import{u as t,r as s,H as r,d as a,L as l}from"./inertia-Cj_WjKpf.js";import{A as i,b as d,c as n}from"./AuthenticatedLayout-9_QGYa_w.js";import{u as o,C as c}from"./app-BNVVFcTX.js";import{C as x,a as m,b as h,c as p,d as g}from"./Card-BDwu8o3f.js";import{B as u}from"./Button-DAnlAX8y.js";import{m as y}from"./motion-CwjCYErC.js";import{B as j,C as b}from"./users-DGojlet8.js";import{P as f}from"./plus-C451Pb2i.js";import{D as N}from"./download-DrNwHbp6.js";import{C as w}from"./clock-DQ09X4Vz.js";import{F as k}from"./funnel-H8XVsEAS.js";import{E as v}from"./eye-DfUIjx7h.js";import{T as _}from"./trash-2-PgX3iJZe.js";import"./vendor-vi784Xxu.js";import"./utils-54zDqgmH.js";import"./house-DyNubFCu.js";import"./shield-BHovswbK.js";function S({predictions:S,stats:C,filters:L={}}){const{showSuccess:I,showError:P,showWarning:R}=o(),{flash:A}=t().props,[E,T]=s.useState(L?.search||""),[D,M]=s.useState(L?.risk_level||""),[H,$]=s.useState(L?.date_from||""),[F,B]=s.useState(L?.date_to||"");s.useEffect(()=>{A?.success&&I(A.success),A?.error&&P(A.error),A?.warning&&R(A.warning)},[A,I,P,R]);const K=t=>{switch(t){case"High":return e.jsx(d,{className:"w-4 h-4 text-red-500"});case"Medium":return e.jsx(w,{className:"w-4 h-4 text-yellow-500"});case"Low":return e.jsx(c,{className:"w-4 h-4 text-green-500"});default:return e.jsx(j,{className:"w-4 h-4 text-gray-500"})}};return e.jsxs(i,{children:[e.jsx(r,{title:"AI Risk Predictions"}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl",children:e.jsx(j,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"AI Risk Predictions"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Machine learning powered risk assessment for KPI performance"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(u,{onClick:()=>a.get("/admin/ai-predictions/create"),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"New Prediction"]}),e.jsxs(u,{variant:"outline",onClick:()=>window.open("/admin/ai-predictions/export","_blank"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(x,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium",children:"Total Predictions"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:C.total_predictions})]}),e.jsx(b,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(x,{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm font-medium",children:"High Risk"}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:C.high_risk})]}),e.jsx(d,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(x,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 border-yellow-200 dark:border-yellow-700",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400 text-sm font-medium",children:"Medium Risk"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:C.medium_risk})]}),e.jsx(w,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(x,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 dark:text-green-400 text-sm font-medium",children:"Low Risk"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:C.low_risk})]}),e.jsx(c,{className:"h-8 w-8 text-green-500"})]})})})]}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-6",children:e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:"Filters"})]})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:E,onChange:e=>T(e.target.value),placeholder:"Search KPIs...",className:"pl-10 w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Risk Level"}),e.jsxs("select",{value:D,onChange:e=>M(e.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"All Levels"}),e.jsx("option",{value:"High",children:"High Risk"}),e.jsx("option",{value:"Medium",children:"Medium Risk"}),e.jsx("option",{value:"Low",children:"Low Risk"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:H,onChange:e=>$(e.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:F,onChange:e=>B(e.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(u,{onClick:()=>{a.get("/admin/ai-predictions",{search:E,risk_level:D,date_from:H,date_to:F},{preserveState:!0,preserveScroll:!0})},className:"w-full",children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Search"]})})]})})]})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Prediction History"}),e.jsx(g,{children:"Recent AI predictions and their results"})]}),e.jsx(m,{children:S.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300 text-sm",children:"TYPE"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300 text-sm",children:"MODEL"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300 text-sm",children:"CONFIDENCE"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300 text-sm",children:"STATUS"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300 text-sm",children:"DATE"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300 text-sm",children:"PREDICTED RISK"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300 text-sm",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.data.map((t,s)=>{return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150 ease-in-out animate-fade-in",style:{animationDelay:50*s+"ms"},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.prediction_type||"risk_assessment"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.model_version||"SRAP1.0_v1.0"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[Math.round(100*(t.confidence_score||.85)),"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border "+("completed"===t.status?"bg-green-100 text-green-800 border-green-200":"processing"===t.status?"bg-blue-100 text-blue-800 border-blue-200":"pending"===t.status?"bg-yellow-100 text-yellow-800 border-yellow-200":"failed"===t.status?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"),children:t.status||"completed"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.prediction_date||t.created_at).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ${r=t.risk_level,{High:"bg-red-100 text-red-800 border-red-200",Medium:"bg-yellow-100 text-yellow-800 border-yellow-200",Low:"bg-green-100 text-green-800 border-green-200"}[r]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:[K(t.prediction_result.risk_level),t.prediction_result.risk_level||"Unknown"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(l,{href:`/admin/ai-predictions/${t.id}`,className:"text-indigo-600 hover:text-indigo-900 transition-colors duration-150",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(e=>{confirm("Are you sure you want to delete this prediction?")&&a.delete(`/admin/ai-predictions/${e.id}`,{onSuccess:()=>{I("Prediction deleted successfully")},onError:()=>{P("Failed to delete prediction")}})})(t),className:"text-red-600 hover:text-red-900 transition-colors duration-150",children:e.jsx(_,{className:"w-4 h-4"})})]})})]},t.id);var r})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No predictions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by creating your first AI risk prediction."}),e.jsx("div",{className:"mt-6",children:e.jsxs(u,{onClick:()=>a.get("/admin/ai-predictions/create"),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Create Prediction"]})})]})})]})}),S.links&&S.links.length>3&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mt-8 flex justify-center",children:e.jsx("div",{className:"flex space-x-2",children:S.links.filter(e=>e&&"object"==typeof e).map((t,s)=>{const r=t.url&&"string"==typeof t.url&&""!==t.url.trim(),a=Boolean(t.active),i=t.label&&"string"==typeof t.label?t.label:"";return r||a?r?e.jsx(l,{href:t.url,className:"px-3 py-2 text-sm rounded-lg transition-colors "+(a?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),dangerouslySetInnerHTML:{__html:i}},`link-${s}`):e.jsx("span",{className:"px-3 py-2 text-sm rounded-lg bg-purple-600 text-white",dangerouslySetInnerHTML:{__html:i}},`active-${s}`):e.jsx("span",{className:"px-3 py-2 text-sm rounded-lg bg-gray-100 text-gray-400 cursor-not-allowed",dangerouslySetInnerHTML:{__html:i}},`disabled-${s}`)})})})]})]})}export{S as default};
