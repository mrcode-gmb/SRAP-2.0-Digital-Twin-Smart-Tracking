import{j as e}from"./ui--EPVQjIL.js";import{r as s,H as a,L as t,d as r}from"./inertia-Cj_WjKpf.js";import{A as l,a as i,B as n,C as c,T as d}from"./AuthenticatedLayout-Cd5OzbYv.js";import{C as o,a as m,b as x,c as h}from"./Card-BDwu8o3f.js";import{B as j}from"./Button-DAnlAX8y.js";import{P as p}from"./Progress-CduTzxar.js";import{m as g}from"./motion-CwjCYErC.js";import{P as u}from"./plus-CC-TTTiI.js";import{F as y}from"./funnel-C1P_Y032.js";import{E as N}from"./ellipsis-CvU4rrKZ.js";import{T as f,U as v}from"./users-pLDL0LDC.js";import{E as b}from"./eye-D-8ZnH9F.js";import{S as w}from"./square-pen-CL3eFiLS.js";import{T as k}from"./trash-2-deQjvOQg.js";import{C as _}from"./app-Ca6YunrJ.js";import{C as S}from"./clock-kezmlZTl.js";import"./vendor-vi784Xxu.js";import"./utils-54zDqgmH.js";import"./house-CDZ5t8h1.js";function C({milestones:C,kpis:D,filters:M}){const[P,A]=s.useState(M?.search||""),[I,$]=s.useState(M?.kpi||""),[T,z]=s.useState(M?.status||""),E=s=>{const a=s.completion_percentage;return new Date(s.due_date)<new Date&&a<100?e.jsx(n,{className:"bg-red-100 text-red-800",children:"Overdue"}):a>=100?e.jsx(n,{className:"bg-green-100 text-green-800",children:"Completed"}):a>0?e.jsx(n,{className:"bg-blue-100 text-blue-800",children:"In Progress"}):e.jsx(n,{className:"bg-gray-100 text-gray-800",children:"Not Started"})},F=s=>{const a=s.completion_percentage;return new Date(s.due_date)<new Date&&a<100?e.jsx(d,{className:"w-5 h-5 text-red-500"}):a>=100?e.jsx(_,{className:"w-5 h-5 text-green-500"}):a>0?e.jsx(S,{className:"w-5 h-5 text-blue-500"}):e.jsx(f,{className:"w-5 h-5 text-gray-500"})},K=s=>{if(!s)return e.jsx(n,{className:"bg-gray-100 text-gray-800",children:"Unknown"});return e.jsx(n,{className:{low:"bg-gray-100 text-gray-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"}[s]||"bg-gray-100 text-gray-800",children:s.charAt(0).toUpperCase()+s.slice(1)})},L=e=>{const s=new Date,a=new Date(e)-s,t=Math.ceil(a/864e5);return t<0?`${Math.abs(t)} days overdue`:0===t?"Due today":1===t?"Due tomorrow":`${t} days left`};return e.jsxs(l,{children:[e.jsx(a,{title:"Milestone Management"}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Milestone Management"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Track and manage milestones for SRAP 2.0 KPIs"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(t,{href:"/milestones/create",children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Add New Milestone"]})})})]})}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-6",children:e.jsx(o,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Milestones"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search by title or description...",value:P,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"KPI"}),e.jsxs("select",{value:I,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All KPIs"}),D?.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:T,onChange:e=>z(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(j,{onClick:()=>{r.get("/milestones",{search:P,Kpis:I,status:T},{preserveState:!0,preserveScroll:!0})},className:"w-full",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})})]})})})}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:C?.data?.map((s,a)=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2+.1*a},children:e.jsxs(o,{className:"hover:shadow-lg transition-all duration-300 border-0 shadow-md",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[F(s),e.jsxs("div",{children:[e.jsx(h,{className:"text-lg font-semibold line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[E(s),K(s.priority)]})]})]}),e.jsx("div",{className:"relative",children:e.jsx(j,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(N,{className:"w-4 h-4"})})})]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:s.description}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[s.completion_percentage,"%"]})]}),e.jsx(p,{value:s.completion_percentage,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(f,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s.kpi?.title}),e.jsx(n,{variant:"outline",className:"text-xs",children:s.kpi?.pillar?.code})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Due: ",new Date(s.due_date).toLocaleDateString()]})]}),e.jsx("span",{className:"text-xs font-medium "+(new Date(s.due_date)<new Date&&s.completion_percentage<100?"text-red-600":"text-gray-500"),children:L(s.due_date)})]}),s.assigned_user&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s.assigned_user.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(t,{href:`/milestones/${s.id}`,children:e.jsxs(j,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"View"]})}),e.jsx(t,{href:`/milestones/${s.id}/edit`,children:e.jsxs(j,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Edit"]})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>(e=>{confirm(`Are you sure you want to delete "${e.title}"?`)&&r.delete(`/milestones/${e.id}`)})(s),className:"text-red-600 hover:text-red-700",children:e.jsx(k,{className:"w-4 h-4"})})]})]})})]})},s.id))}),(!C?.data||0===C.data.length)&&e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center py-12",children:[e.jsx(c,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Milestones Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Get started by creating your first milestone to track progress."}),e.jsx(t,{href:"/milestones/create",children:e.jsxs(j,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Create Your First Milestone"]})})]}),C?.links&&e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mt-8 flex justify-center",children:e.jsx("div",{className:"flex space-x-2",children:C.links.map((s,a)=>e.jsx(t,{href:s.url??"#",className:"px-3 py-2 text-sm rounded-lg "+(s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border"),dangerouslySetInnerHTML:{__html:s.label}},a))})})]})]})}export{C as default};
