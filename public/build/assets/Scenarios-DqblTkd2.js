import{j as e}from"./ui--EPVQjIL.js";import{r as s,H as a,L as t,d as r}from"./inertia-Cj_WjKpf.js";import{A as i,a as l,C as n,B as c}from"./AuthenticatedLayout-Cd5OzbYv.js";import{C as d,a as o,b as m,c as x}from"./Card-BDwu8o3f.js";import{B as p}from"./Button-DAnlAX8y.js";import{m as h}from"./motion-CwjCYErC.js";import{P as u}from"./plus-CC-TTTiI.js";import{F as j}from"./funnel-C1P_Y032.js";import{C as g,T as y}from"./users-pLDL0LDC.js";import{T as f}from"./trending-up-B4U6kifh.js";import{E as N}from"./eye-D-8ZnH9F.js";import{P as b}from"./play-BdGM5sH5.js";import{D as v}from"./download-4hEdwsx9.js";import{T as w}from"./trash-2-deQjvOQg.js";import"./vendor-vi784Xxu.js";import"./utils-54zDqgmH.js";import"./house-CDZ5t8h1.js";import"./app-Ca6YunrJ.js";function k({scenarios:k,filters:S}){const[C,_]=s.useState(S?.search||""),[A,L]=s.useState(S?.type||""),[T,D]=s.useState(S?.status||"");return e.jsxs(i,{children:[e.jsx(a,{title:"Scenario Management"}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Scenario Management"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Create and run what-if scenarios for SRAP 2.0 planning"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(t,{href:"/admin/scenarios/create",children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Create Scenario"]})})})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-6",children:e.jsx(d,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Scenarios"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search scenarios...",value:C,onChange:e=>_(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),e.jsxs("select",{value:A,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"what_if",children:"What-If Analysis"}),e.jsx("option",{value:"budget_impact",children:"Budget Impact"}),e.jsx("option",{value:"timeline_adjustment",children:"Timeline Adjustment"}),e.jsx("option",{value:"resource_allocation",children:"Resource Allocation"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:T,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"running",children:"Running"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"draft",children:"Draft"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(p,{onClick:()=>{r.get("/admin/scenarios",{search:C,type:A,status:T},{preserveState:!0,preserveScroll:!0})},className:"w-full",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})})]})})})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:k?.data?.map((s,a)=>{return e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2+.1*a},children:e.jsxs(d,{className:"hover:shadow-lg transition-all duration-300 border-0 shadow-md h-full",children:[e.jsx(m,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(x,{className:"text-lg font-semibold line-clamp-2",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(l=s.type,e.jsx(c,{className:{what_if:"bg-blue-100 text-blue-800",budget_impact:"bg-green-100 text-green-800",timeline_adjustment:"bg-yellow-100 text-yellow-800",resource_allocation:"bg-purple-100 text-purple-800"}[l]||"bg-gray-100 text-gray-800",children:l.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})),(i=s.status,e.jsx(c,{className:{completed:"bg-green-100 text-green-800",running:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800"}[i]||"bg-gray-100 text-gray-800",children:i.charAt(0).toUpperCase()+i.slice(1)}))]})]})]})})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:s.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.parameters&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Object.keys(s.parameters).length," parameters"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Created: ",new Date(s.created_at).toLocaleDateString()]})]}),s.last_run_at&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Last run: ",new Date(s.last_run_at).toLocaleDateString()]})]})]}),s.results&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Latest Results"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Impact Score: ",s.results.impact_score||"N/A"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(t,{href:`/admin/scenarios/${s.id}`,children:e.jsxs(p,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"View"]})}),"running"!==s.status&&e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>(e=>{r.post("/admin/scenarios/simulate",{scenario_id:e.id})})(s),className:"flex-1",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Run"]}),"completed"===s.status&&e.jsx(p,{variant:"outline",size:"sm",onClick:()=>((e,s="pdf")=>{window.open(`/admin/scenarios/${e.id}/export/${s}`,"_blank")})(s),children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>(e=>{confirm(`Are you sure you want to delete "${e.name}"?`)&&r.delete(`/admin/scenarios/${e.id}`)})(s),className:"text-red-600 hover:text-red-700",children:e.jsx(w,{className:"w-4 h-4"})})]})]})})]})},s.id);var i,l})}),(!k?.data||0===k.data.length)&&e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center py-12",children:[e.jsx(g,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Scenarios Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first scenario to analyze different planning options."}),e.jsx(t,{href:"/admin/scenarios/create",children:e.jsxs(p,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Create First Scenario"]})})]}),k?.links&&e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mt-8 flex justify-center",children:e.jsx("div",{className:"flex space-x-2",children:k.links.map((s,a)=>e.jsx(t,{href:s.url??"#",className:"px-3 py-2 text-sm rounded-lg "+(s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border"),dangerouslySetInnerHTML:{__html:s.label}},a))})})]})]})}export{k as default};
